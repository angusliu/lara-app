### 開發環境：
OS - Ubuntu 20.04
Web Server - NGINX
Database - MySQL 8.0.27
Language - PHP 7.4
Framework - Laravel 8.34

Production:
https://togayther.com/

Source Code:
https://drive.google.com/file/d/1ngNxZQBETgbNnuObZpsEpmXMeaBYnjNs/view?usp=sharing


# source code:
# https://bitbucket.org/RodneyTang/togayther/src/master/
# git clone via SSH:
git clone git@bitbucket.org:RodneyTang/togayther.git

# git clone via HTTPS:
git clone https://AngusLiu1975@bitbucket.org/RodneyTang/togayther.git

cd <laravel-project-root>
composer install
cp .env.example .env

# edit .env
APP_ENV=local
APP_DEBUG=true
APP_URL=http://192.168.1.112:8888 # your IP or hostname with port number (if not port 80)

ADMIN_HTTPS=false

DB_HOST=127.0.0.1
DB_DATABASE=web_app
DB_USERNAME=angus
DB_PASSWORD=
# php artisan key:generate
# php artisan migrate
# php artisan db:seed

# more on running project:
# comment Laravel\Scout\Searchable traits in <project-root>/app/Models/Post.php to avoid connecting to Algolia for full-text search
#    //use DefaultDatetimeFormat, Searchable;
#    use DefaultDatetimeFormat;

#---------------------------------------------------------

# install ubuntu-live-server.iso

#
sudo apt-get install -y aptitude

#
apt install net-tools

#
apt install mysql-server

apt install php-mysql

#login mysql root
#mysql>CREATE DATABASE `web_app`;
#mysql>CREATE USER 'angus'@'localhost' IDENTIFIED BY ''; # empty password IDENTIFIED BY 'password'
#mysql>GRANT ALL PRIVILEGES ON `web_app`.* TO 'angus'@'localhost';
#edit laravel-root/.env
#	DB_DATABASE=web_app
#	DB_USERNAME=angus

#
apt install nginx

# apt-get update -y
sudo apt-get install php-xml # required by installing composer

sudo apt-get install php-curl # required by installing rap2hpoutre/laravel-log-viewer

sudo apt-get install php-gd # required in 2022-03-16

#
sudo apt-get install composer

# uninstall by `composer global remove laravel/installer`
composer global require laravel/installer

#add following lines at the end of $HOME/.bashrc 
	# added by me
	export PATH="$HOME/.config/composer/vendor/bin:$PATH"

# `composer create-project laravel/laravel=5.8.* demo --prefer-dist` ,or `laravel new ex-app`
composer create-project laravel/laravel=8.5.* web-app --prefer-dist

# goto the laravel project root and execute `composer install` (current version) or `composer update` (new version)
# this will install all required packages defined in composer.json

# or install package in the laravel project root by executing
# `composer require rap2hpoutre/laravel-log-viewer`

# more info: php artisan help serve
# before running up, the following commands can help to clear config and cache
# php artisan config:clear
# php artisan cache:clear
php artisan serve --host=0.0.0.0 --port=8888

#----------------------------------------------------------------------

# install laravel-admin:
composer require encore/laravel-admin

php artisan vendor:publish --provider="Encore\Admin\AdminServiceProvider"

php artisan admin:install

php artisan serve --host=0.0.0.0 --port=9999

http://your-host:port/admin

# default acc/pwd:admin/admin

# see https://laravel-admin.org/docs/en/quick-start for a jump start
# 1. make Controller
# php artisan admin:make UserController --model=App\\Models\\User (Linux)
# php artisan admin:make UserController --model=App\Models\User (Windows)
# for first AdminController
# 2. add route
# added following in <project-root>/app/Admin/route.php
#	$router->resource('demo/users', UserController::class);
# 3. add menu
# now, you have a User management page in laravel-admin UI

#----------------------------------------------------------------------
# Resources:

# upgrade composer:
curl -sS https://getcomposer.org/installer | php
# execute composer by
./composer.phar -V

# search PHP packages:
https://packagist.org/

#----------------------------------------------------------------------


---

DB coupon:

table.users: 含使用者現有點數
table.points: 點數管理規則 #rule
table.user_point: 依點數獲得規則產生的點數 #event
table.user_coupons: 使用者已兌換的優惠券
table.coupons: 建立的優惠券 (含發行總張數/已兌換/已使用)
table.coupon_types: 優惠券分類 #category
table.stores: 店家資訊

## Issue: relational DB with open schema
google://database design for arbitrary attribute
google://Entity–attribute–value vs JSON performance
google://MySQL native JSON support
https://devs.tw/post/53
https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model


---

/*
tech:
- nginx/mysql/laravel/docker/git 配置文件及環境設定 (e.g ssl cert/key, CA, .env, database settings, git)
- build scripts (js/css minifier or obfuscator)
- deploy scripts
- db schema/migration
- 測試流程/auto unitest/env (e.g prd, stg, beta, alfa, dev)
- web test account (e.g 使用者/管理者帳號 可供測試功能)
	usr/pwd:ttliu5888@gmail.com/5tgb%TGB
	adm/pwd:taliu5888@gmail.com/togayther

production:
https://togayther.com/admin
Acc : taliu5888@gmail.com
Psw : togayther

dev:
https://139.162.84.198/

- git repo

prod:
- function completed
- how it is used by most users

spec/驗收

//*/

